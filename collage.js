!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=React},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(3);o.render(r.createElement(i.default,null),document.getElementById("app"))},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),l=n(4),c=n(5),p=function(e){return s.createElement("div",null,s.createElement("h3",null,"Images"),s.createElement("div",{style:{overflowY:"auto",width:300,height:400,border:"1px solid #888",backgroundColor:"#f7f7f7",borderRadius:"1em",display:"grid",gridTemplateColumns:"1fr 1fr 1fr"}},e.images.map((function(t,n){return s.createElement(d,i({key:n},t,{selected:e.selected==n,onImageClick:function(){return e.onImageClick(n)}}))}))))},d=function(e){if(e.error)return s.createElement("div",{style:{color:"red"}},e.name);var t=e.selected?{display:"grid",width:96,padding:0,border:"2px solid red",textAlign:"center"}:{display:"grid",width:100,padding:2,textAlign:"center"};return s.createElement("div",{style:t,onClick:e.onImageClick},s.createElement("div",null,s.createElement("img",{src:e.data,width:64,height:64})),s.createElement("div",{style:{overflow:"hidden"}},e.name))},u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={images:[],selected:-1,width:512,height:512,rows:4,columns:4},n.onImageUpload=n.onImageUpload.bind(n),n.onImageError=n.onImageError.bind(n),n.onImageSwap=n.onImageSwap.bind(n),n.onImageRemove=n.onImageRemove.bind(n),n.onImageDemote=n.onImageDemote.bind(n),n.onImageClick=n.onImageClick.bind(n),n}return o(t,e),t.prototype.onImageUpload=function(e,t){var n=a(this.state.images);n.push({name:e,data:t,error:!1}),this.setState({images:n})},t.prototype.onImageError=function(e){var t=a(this.state.images);t.push({name:e,error:!0}),this.setState({images:t})},t.prototype.onImageSwap=function(e,t){if(Math.floor(e)==e&&Math.floor(t)==t&&!(e<0||e>=this.state.images.length||t<0||t>=this.state.images.length)){var n=a(this.state.images),r=n[e];n[e]=n[t],n[t]=r,this.setState({images:n,selected:-1})}},t.prototype.onImageRemove=function(e){if(!(Math.floor(e)!=e||e<0||e>=this.state.images.length)){var t=a(this.state.images);t.splice(e,1),this.setState({images:t,selected:-1})}},t.prototype.onImageDemote=function(e){if(!(Math.floor(e)!=e||e<0||e>=this.state.images.length)){var t=a(this.state.images),n=t[e];t.splice(e,1),t.push(n),this.setState({images:t,selected:-1})}},t.prototype.onImageClick=function(e){this.setState({selected:e})},t.prototype.render=function(){var e=this;return s.createElement("div",null,s.createElement("h1",null,"Collage Designer"),s.createElement("div",{style:{display:"grid",gridTemplateColumns:"380px auto"}},s.createElement("div",null,s.createElement(p,{images:this.state.images,selected:this.state.selected,onImageClick:this.onImageClick}),s.createElement("div",null,s.createElement("h3",null,"Add"),s.createElement(c.default,{onImageUpload:this.onImageUpload,onImageError:this.onImageError})),s.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 3fr"}},s.createElement("h3",{style:{gridColumnStart:1,gridColumnEnd:3}},"Properties"),s.createElement("div",null,"Width"),s.createElement("div",null,s.createElement("input",{type:"text",value:this.state.width,size:2,onChange:function(t){return e.setState({width:parseInt(t.target.value)||512})}})),s.createElement("div",null,"Height"),s.createElement("div",null,s.createElement("input",{type:"text",value:this.state.height,size:2,onChange:function(t){return e.setState({height:parseInt(t.target.value)||512})}})),s.createElement("div",null,"Rows"),s.createElement("div",null,s.createElement("input",{type:"text",value:this.state.rows,size:2,onChange:function(t){return e.setState({rows:parseInt(t.target.value)||1})}})),s.createElement("div",null,"Columns"),s.createElement("div",null,s.createElement("input",{type:"text",value:this.state.columns,size:2,onChange:function(t){return e.setState({columns:parseInt(t.target.value)||1})}})))),s.createElement("div",null,s.createElement("h3",null,"Collage"),s.createElement("div",{style:{backgroundColor:"#eee",borderRadius:"1em",display:"inline-block"}},s.createElement(l.default,i({},this.state,{onImageSwap:this.onImageSwap,onImageRemove:this.onImageRemove,onImageClick:this.onImageClick,onImageDemote:this.onImageDemote}))))))},t}(s.Component);t.default=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.state={rendering:!1},n.onImageClick=n.onImageClick.bind(n),n.onImageRemove=n.onImageRemove.bind(n),n.onImageDemote=n.onImageDemote.bind(n),n.renderImage=n.renderImage.bind(n),n.canvas=document.createElement("canvas"),n}return o(t,e),t.prototype.onImageClick=function(e){-1==this.props.selected?this.props.onImageClick(e):this.props.onImageSwap(this.props.selected,e)},t.prototype.onImageRemove=function(){-1!=this.props.selected&&this.props.onImageRemove(this.props.selected)},t.prototype.onImageDemote=function(){-1!=this.props.selected&&this.props.onImageDemote(this.props.selected)},t.prototype.render=function(){var e=this,t=this.props.width/this.props.columns,n=Array(this.props.columns).fill(t+"px").join(" "),r=this.props.height/this.props.rows,o=Array(this.props.rows).fill(r+"px").join(" "),a=this.props.rows*this.props.columns;this.canvas.width=this.props.width,this.canvas.height=this.props.height;var s=this.canvas.getContext("2d");s.fillRect(0,0,this.props.width,this.props.height);for(var l=[],c=function(n){var o=p.props.images[n];if(o.data&&p.state.rendering){var a=n%p.props.columns*t,c=Math.floor(n/p.props.columns)*r,d=new Image(t,r);d.onload=function(e){console.log("Render "+o.name),s.drawImage(d,0,0,d.naturalWidth,d.naturalHeight,a,c,t,r)},d.src=o.data}var u={};n==p.props.selected?(u.border="2px solid red",u.width=t-4,u.height=r-4):(u.width=t,u.height=r),l.push(i.createElement("div",{key:n},i.createElement("img",{style:u,src:o.data,onClick:function(t){return e.onImageClick(n)}})))},p=this,d=0;d<a&&d<this.props.images.length;d++)c(d);return i.createElement("div",{style:{margin:"1em"}},i.createElement("div",{style:{margin:"0.25em",width:this.props.width,height:this.props.height,display:"grid",backgroundColor:"#FFF",gridTemplateColumns:n,gridTemplateRows:o}},l),i.createElement("button",{style:{width:75,height:25,margin:"0.25em"},disabled:!this.state.rendering,onClick:this.renderImage},"Save"),i.createElement("button",{style:{backgroundColor:this.state.rendering?"red":"silver",width:75,height:25,margin:"0.25em"},onClick:function(t){return e.setState({rendering:!e.state.rendering})}},"Rendering"),i.createElement("button",{style:{width:75,height:25,margin:"0.25em"},disabled:this.props.selected<0,onClick:this.onImageRemove},"Remove"),i.createElement("button",{style:{width:75,height:25,margin:"0.25em"},disabled:this.props.selected<0,onClick:this.onImageDemote},"To End"),i.createElement("div",{style:{display:this.props.selected>=0?"block":"none"}},"Selected:"," ",i.createElement("span",{style:{fontWeight:"bold"}},this.props.selected>=0?this.props.images[this.props.selected].name:"")),i.createElement("div",{style:{display:this.state.file?"block":"none"}},"Download"," ",i.createElement("a",{href:this.state.file,download:this.state.name,style:{display:this.state.file?"inline":"none"}},this.state.name)))},t.prototype.renderImage=function(){var e=(new Date).toLocaleString();this.setState({file:this.canvas.toDataURL("image/jpeg"),name:"collage-"+e+".jpg"})},t}(i.Component);t.default=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={pending:[],working:!1,current:null},n.onFileChange=n.onFileChange.bind(n),n}return o(t,e),t.prototype.onFileChange=function(e){for(var t=this,n=i(this.state.pending),r=0;r<e.target.files.length;r++)n.push(e.target.files[r]);e.target.value=null,this.setState({pending:n},(function(){t.state.working||t.setState({working:!0},(function(){return t.processPending()}))}))},t.prototype.processPending=function(){var e=this;if(0!=this.state.pending.length){var t=i(this.state.pending),n=t.shift(),r=new FileReader;r.onload=function(t){e.props.onImageUpload&&e.props.onImageUpload(n.name,t.target.result),e.processPending()},r.onerror=function(t){e.props.onImageError&&e.props.onImageError(n.name),e.processPending()},r.readAsDataURL(n),this.setState({pending:t,current:n})}else this.setState({working:!1})},t.prototype.render=function(){return a.createElement("div",null,a.createElement("input",{type:"file",multiple:!0,accept:"image/*",onChange:this.onFileChange}),a.createElement("div",null,this.state.working?"Uploading...":""))},t}(a.Component);t.default=s}]);
//# sourceMappingURL=collage.js.map